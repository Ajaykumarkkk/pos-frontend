<div class="order-container">
    <div class="product-section">
        <h2>Add Products</h2>
        <div class="product-controls">
            <select [(ngModel)]="selectedProduct">
                <option *ngFor="let product of products" [ngValue]="product">{{ product.name }}</option>
            </select>
            <input type="number" [(ngModel)]="quantity" min="1" />
            <button (click)="addProduct()">
                <span>Ôºã</span> Add
            </button>
        </div>

        <table *ngIf="selectedProducts.length > 0">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Qty</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of selectedProducts; let i = index">
                    <td>{{ item.name }}</td>
                    <td>{{ item.qty }}</td>
                    <td>{{ item.price | currency:'INR':'symbol' }}</td>
                    <td>{{ item.price * item.qty | currency:'INR':'symbol' }}</td>
                    <td><button (click)="removeProduct(i)">&#x1F5D1;</button></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="summary-section">
        <h2>Order Summary</h2>

        <label>Customer
            <select [(ngModel)]="selectedCustomer">
                <option *ngFor="let customer of customers" [ngValue]="customer">{{ customer.name }}</option>
            </select>
        </label>

        <label>Payment Method
            <select [(ngModel)]="paymentMethod">
                <option *ngFor="let method of paymentMethods" [value]="method">{{ method }}</option>
            </select>
        </label>

        <label>Discount
            <input type="number" [(ngModel)]="discount" />
        </label>

        <label>Tax Rate (%)
            <input type="number" [(ngModel)]="taxRate" min="0" />
        </label>

        <label>Customer Pays<input type="number" [ngModel]="customerPays" (ngModelChange)="customerPays = $event"
                (focus)="onCustomerPaysFocus()" (blur)="onCustomerPaysBlur()" placeholder="" />
        </label>

        <label>Balance Returned
            <input type="text" [value]="balanceReturned" readonly />
        </label>


        <div class="totals">
            <div><span>Subtotal:</span> <span>{{ subtotal | currency:'INR':'symbol' }}</span></div>
            <div><span>Tax ({{ taxRate }}%):</span> <span>{{ tax | currency:'INR':'symbol' }}</span></div>
            <div><span>Discount:</span> <span>-{{ discount | currency:'INR':'symbol' }}</span></div>
            <div><span>Customer Pays:</span> <span>-{{ customerPays | currency:'INR':'symbol' }}</span></div>
            <div><span>Balance Returned:</span> <span>-{{ balanceReturned | currency:'INR':'symbol' }}</span></div>
            <div class="total"><span>Total:</span> <span>{{ total | currency:'INR':'symbol' }}</span></div>
        </div>

        <button (click)="placeOrder()" class="place-order">
            üõí Place Order
        </button>
        <button (click)="cancelOrder()" class="cancel-order">
            Cancel
        </button>
        <div *ngIf="errorMessage" class="error-message">
            ‚ö†Ô∏è {{ errorMessage }}
        </div>
    </div>
</div>